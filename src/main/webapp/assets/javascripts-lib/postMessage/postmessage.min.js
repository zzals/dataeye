/*! skinny.js v0.1.0 | Copyright 2013 Vistaprint | vistaprint.github.io/SkinnyJS/LICENSE
 http://vistaprint.github.io/SkinnyJS/download-builder.html?modules=jquery.postMessage*/

!function(a,b){function c(a){return a.replace(/([^:]+:\/\/[^\/]+).*/,"$1")}function d(a,c){return"string"==typeof a&&c!==a&&"*"!==a?!1:b.isFunction(a)&&!a(c)?!1:!0}function e(a,b,c){var d;if("undefined"==typeof c&&(c=0),a.frames)try{for(d=0;d<a.frames.length;d++)try{if(a.frames[d]===b)return"f,"+d}catch(f){if(-2147024891!==f.number)throw f}}catch(g){if(-2146823279!==g.number)throw g}if(a.parent&&a.parent===b)return"p";if(a.opener&&a.opener===b)return"o";if(c>=4)return!1;var h;if(a.frames&&a.frames.length>0)for(d=0;d<a.frames.length;d++)if(h=e(a.frames[d],b,c+1))return"f,"+d+"."+h;return a.parent&&a.parent!==a&&(h=e(a.parent,b,c+1))?"p."+h:a.opener&&a.opener!==a&&(h=e(a.opener,b,c+1))?"o"+h:!1}function f(a,b){if("string"==typeof b)return":"+b;if(a===b)throw new Error("Trying to postMessage to self. Pointlessly useless.");if(a.parent&&a.parent!==a&&a.parent===b)return"p";if(a.opener&&a.opener!==a&&a.opener===b)return"o";var c=e(a,b);if(c)return c;throw new Error("Couldn't serialize window reference")}var g=1,h=!!a.postMessage;b.postMessage=function(d,e,j,k){if(!e)throw new Error("targetHost argument was not supplied to jQuery.postMessage");if(!j)throw new Error("No targetWindow specified");if(e=c(e),h)try{return void j.postMessage(d,e)}catch(l){if(-2147467262!=l.number)throw l}try{var m=j.__receiveMessageHook;if(m)return void m(d,e)}catch(l){}var n=f(a,k||j),o=c(document.location.href),p=document.createElement("iframe");if(!e||"*"==e)throw new Error("$.postMessage(): Must specify targetHost on browsers that don't support postMessage natively (cannot be '*').");b("body").append(b(p).hide().attr("src",e+i()+"#"+ +new Date+g+"&"+n+"&"+o+"&"+encodeURIComponent(d)).load(function(){b(p).remove()})),g++},b.receiveMessage=function(c,e){if(!c)throw new Error("No callback function specified");e||(e="*"),b(a).on("message",function(a,b,f){return b||(b=a.originalEvent?a.originalEvent.data:a.data),f||(f=a.originalEvent?a.originalEvent.origin:a.origin),d(e,a.originalEvent?a.originalEvent.origin:f)?c({data:b,origin:f}):!1})},a.__receiveMessageHook=function(c,d){var e=new b.Event("message");e.data=c,e.origin=d,b(a).trigger(e,[e.data,e.origin])},b.fn.postMessage=function(a,c,d){return this.each(function(e,f){if(!(f instanceof Window))throw new Error("postMessage can only be sent to a window");b.postMessage(a,c,f,d)}),this},b.event.special.message={add:function(a){var b=a.handler;a.handler=function(a,c,d){return a.data=a.originalEvent?a.originalEvent.data:c,a.origin=a.originalEvent?a.originalEvent.origin:d,b.call(this,a,a.data,a.origin)}}};var i=function(){if(!a._jqueryPostMessagePolyfillPath)throw new Error("Must configure jquery.postMessage() with window._jqueryPostMessagePolyfillPath for IE7 support. Should be '/root-relative-path-on-my-server/postmessage.htm'");return a._jqueryPostMessagePolyfillPath}}(window,jQuery);